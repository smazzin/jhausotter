{{ define "main" }}
<div class="section header">
    <div class="grid grid--container">
        <div class="row">
            <div class="col col--sm col--sm-align-center text--xs-center">
                <h1>{{ with .Params.PageTitle }}{{ . | safeHTML }}{{ end }}</h1>
            </div>
        </div>
    </div>
</div>
<div class="section">
    <div class="grid grid--container">
        <div class="row">
            <div class="col col--sm-9 col--sm-offset-1">
            {{ .Content }}
            <div class="row">
                <div class="col col--sm-7 col--sm-offset-5 col--xs-align-center" style="padding:2.5rem 0;">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>
            <div class="row">
                <div class="col col--sm col--sm-align-top">
                    <form id="contact-form" name="contact" data-netlify="true" netlify-honeypot="bot-field" method="post">
                        <input type="text" name="Name" placeholder="Name" onblur="this.setAttribute('value', this.value);" value=""
                        required>
                        <input placeholder="Email address" type="email" name="_replyto"
                        onblur="this.setAttribute('value', this.value);" value="" required>
                        <textarea name="Message" cols="30" rows="6" placeholder="Message" required></textarea>
                        <input type="hidden" name="bot-field" />
                        <label for="fire-watch">Reason for coverage *</label>
                        <select id="fire-watch" name="fire-watch" required>
                            <option value="">--Please choose an option--</option>
                            <option value="fire-panel-down">Fire Watch - Fire Panel down</option>
                            <option value="burglar-alarm-down">Fire Watch - Burglar Alarm down </option>
                            <option value="alarm-system-down">Fire Watch - Alarm System down </option>
                            <option value="other">Other </option>
                        </select>
                        
                        <div id="other-reason-container" style="display:none;">
                            <input id="subject" type="hidden" name="subject" data-remove-prefix value="Form submission from jcp" />
                            <label for="other-reason-for-coverage">Other Reason for coverage</label>
                            <textarea type="text" id="other-reason-for-coverage" name="other-reason-for-coverage" cols="30" rows="5"></textarea>
                        </div>
                        <input class="ghost-button-rounded-corners" type="submit" value="Send Message">
                    </form>
                </div>
                <div class="col col--sm col--sm-align-top">
                    <div class="call">
                        <h4>Prefer to Call?</h4>
                        <a class="phone-number" href="tel:541-375-0255"><i class="phone-handset"></i> (541) 375-0255</a>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
	document.getElementById('fire-watch').addEventListener('change', function() {
    var otherReasonContainer = document.getElementById('other-reason-container');
    if(this.value === 'other') {
        otherReasonContainer.style.display = 'block';
    } else {
        otherReasonContainer.style.display = 'none';
    }
});
document.addEventListener('DOMContentLoaded', (event) => {
    // Select the dropdown and the subject input field
    const fireWatchDropdown = document.getElementById('fire-watch');
    const subjectInput = document.getElementById('subject');
    
    // Function to update the subject input value based on the selected option
    function updateSubject() {
        let selectedOption = fireWatchDropdown.options[fireWatchDropdown.selectedIndex].text;
        // If "Other" is selected, use the text from the "other-reason-for-coverage" textarea
        if (selectedOption === 'Other') {
            const otherReason = document.getElementById('other-reason-for-coverage').value;
            selectedOption = otherReason ? `Other - ${otherReason}` : 'Other';
        }
        subjectInput.value = selectedOption;
    }
    
    // Update the subject whenever the selected option changes
    fireWatchDropdown.addEventListener('change', updateSubject);
    
    // Update the subject whenever the other-reason-for-coverage textarea changes
    document.getElementById('other-reason-for-coverage').addEventListener('input', updateSubject);
});
</script>
{{ end }}